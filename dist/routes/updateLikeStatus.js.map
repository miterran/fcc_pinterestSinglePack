{"version":3,"sources":["../../server/routes/updateLikeStatus.js"],"names":["router","Router","use","post","authenticate","session","req","res","body","like","findOneAndUpdate","_id","pic","$pull","likes","user","googleId","new","err","result","json","$push"],"mappings":";;;;;;AAAA;;;;AAGA;;;;AACA;;;;AACA;;;;;;AAJA,IAAMA,SAAS,kBAAQC,MAAR,EAAf;;AAMA,mBAASC,GAAT;;AAEAF,OAAOG,IAAP,CAAY,GAAZ,EAAiB,mBAASC,YAAT,CAAsB,KAAtB,EAA6B,EAACC,SAAS,KAAV,EAA7B,CAAjB,EAAiE,UAASC,GAAT,EAAcC,GAAd,EAAkB;AAClF,KAAGD,IAAIE,IAAJ,CAASC,IAAZ,EAAiB;AAChB,oBAAQC,gBAAR,CAAyB,EAACC,KAAKL,IAAIE,IAAJ,CAASI,GAAT,CAAaD,GAAnB,EAAzB,EAAkD,EAACE,OAAO,EAACC,OAAOR,IAAIS,IAAJ,CAASC,QAAjB,EAAR,EAAlD,EAAuF,EAACC,KAAK,IAAN,EAAvF,EAAoG,UAASC,GAAT,EAAcC,MAAd,EAAqB;AACxHZ,OAAIa,IAAJ,CAASD,MAAT;AACA,GAFD;AAGA,EAJD,MAIK;AACJ,oBAAQT,gBAAR,CAAyB,EAACC,KAAKL,IAAIE,IAAJ,CAASI,GAAT,CAAaD,GAAnB,EAAzB,EAAkD,EAACU,OAAO,EAACP,OAAOR,IAAIS,IAAJ,CAASC,QAAjB,EAAR,EAAlD,EAAuF,EAACC,KAAK,IAAN,EAAvF,EAAoG,UAASC,GAAT,EAAcC,MAAd,EAAqB;AACxHZ,OAAIa,IAAJ,CAASD,MAAT;AACA,GAFD;AAGA;AACD,CAVD;;kBAYenB,M","file":"updateLikeStatus.js","sourcesContent":["import express from 'express';\nconst router = express.Router();\n\nimport Picture from '../models/Picture';\nimport jwtPass from '../middlewarePassport/jwtPass';\nimport passport from \"passport\";\n\npassport.use(jwtPass);\n\nrouter.post('/', passport.authenticate('jwt', {session: false}), function(req, res){\n\tif(req.body.like){\n\t\tPicture.findOneAndUpdate({_id: req.body.pic._id}, {$pull: {likes: req.user.googleId}}, {new: true}, function(err, result){\n\t\t\tres.json(result)\n\t\t})\n\t}else{\n\t\tPicture.findOneAndUpdate({_id: req.body.pic._id}, {$push: {likes: req.user.googleId}}, {new: true}, function(err, result){\n\t\t\tres.json(result)\n\t\t})\n\t}\n})\n\nexport default router\n"]}