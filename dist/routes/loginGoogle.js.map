{"version":3,"sources":["../../server/routes/loginGoogle.js"],"names":["router","Router","post","req","res","body","googleId","findOneAndUpdate","$set","err","result","status","token","sign","send","newUser","save","then"],"mappings":";;;;;;AAAA;;;;AACA;;;;AAGA;;;;;;AAFA,IAAMA,SAAS,kBAAQC,MAAR,EAAf;;AAIAD,OAAOE,IAAP,CAAY,GAAZ,EAAiB,UAASC,GAAT,EAAcC,GAAd,EAAkB;AAClC,KAAGD,IAAIE,IAAJ,CAASC,QAAZ,EAAqB;AACpB,iBAAKC,gBAAL,CAAsB,EAACD,UAAUH,IAAIE,IAAJ,CAASC,QAApB,EAAtB,EAAqD,EAACE,MAAML,IAAIE,IAAX,EAArD,EAAuE,UAASI,GAAT,EAAcC,MAAd,EAAqB;AAC3F,OAAGD,GAAH,EAAQL,IAAIO,MAAJ,CAAW,GAAX;AACR,OAAGD,MAAH,EAAU;AACT,QAAME,QAAQ,uBAAIC,IAAJ,CAASV,IAAIE,IAAb,EAAmB,KAAnB,CAAd;AACA,WAAOD,IAAIU,IAAJ,CAASF,KAAT,CAAP;AACA,IAHD,MAGK;AACJ,QAAMG,UAAU,mBAASZ,IAAIE,IAAb,CAAhB;AACAU,YAAQC,IAAR,GAAeC,IAAf,CAAoB,UAASR,GAAT,EAAa;AAChC,SAAGA,GAAH,EAAQL,IAAIO,MAAJ,CAAW,GAAX;AACR,SAAMC,QAAQ,uBAAIC,IAAJ,CAASV,IAAIE,IAAb,EAAmB,KAAnB,CAAd;AACA,YAAOD,IAAIU,IAAJ,CAASF,KAAT,CAAP;AACA,KAJD;AAKA;AACD,GAbD;AAcA,EAfD,MAeK;AACJR,MAAIO,MAAJ,CAAW,GAAX;AACA;AACD,CAnBD;;kBAsBeX,M","file":"loginGoogle.js","sourcesContent":["import express from 'express';\nimport User from '../models/User';\nconst router = express.Router();\n\nimport jwt from 'jsonwebtoken';\n\nrouter.post('/', function(req, res){\n\tif(req.body.googleId){\n\t\tUser.findOneAndUpdate({googleId: req.body.googleId}, {$set: req.body}, function(err, result){\n\t\t\tif(err) res.status(404)\n\t\t\tif(result){\n\t\t\t\tconst token = jwt.sign(req.body, 'fcc')\n\t\t\t\treturn res.send(token)\n\t\t\t}else{\n\t\t\t\tconst newUser = new User(req.body)\n\t\t\t\tnewUser.save().then(function(err){\n\t\t\t\t\tif(err) res.status(404)\n\t\t\t\t\tconst token = jwt.sign(req.body, 'fcc')\n\t\t\t\t\treturn res.send(token)\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t}else{\n\t\tres.status(404)\n\t}\n})\n\n\nexport default router\n\n\n\n\n"]}