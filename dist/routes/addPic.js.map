{"version":3,"sources":["../../server/routes/addPic.js"],"names":["router","Router","use","post","authenticate","session","req","res","body","imageUrl","then","result","status","newPicture","title","imageTitle","url","time","format","owner","user","likes","save","send"],"mappings":";;;;;;AAAA;;;;AAGA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AANA,IAAMA,SAAS,kBAAQC,MAAR,EAAf;;AAOA,mBAASC,GAAT;;AAEAF,OAAOG,IAAP,CAAY,GAAZ,EAAiB,mBAASC,YAAT,CAAsB,KAAtB,EAA6B,EAACC,SAAS,KAAV,EAA7B,CAAjB,EAAiE,UAASC,GAAT,EAAcC,GAAd,EAAkB;AAClF,0BAAMD,IAAIE,IAAJ,CAASC,QAAf,EAAyBC,IAAzB,CAA8B,UAASC,MAAT,EAAgB;AAC7C,MAAGA,OAAOC,MAAP,KAAkB,GAArB,EAAyB;AACxB,OAAMC,aAAa,sBAAY;AAC9BC,WAAOR,IAAIE,IAAJ,CAASO,UADc;AAE9BC,SAAKV,IAAIE,IAAJ,CAASC,QAFgB;AAG9BQ,UAAM,wBAASC,MAAT,CAAgB,GAAhB,CAHwB;AAI9BC,WAAOb,IAAIc,IAJmB;AAK9BC,WAAO;AALuB,IAAZ,CAAnB;AAOAR,cAAWS,IAAX,GAAkBZ,IAAlB,CAAuB,UAASC,MAAT,EAAgB;AACtCJ,QAAIgB,IAAJ,CAAS,eAAT;AACA,IAFD;AAGA,GAXD,MAWK;AACJhB,OAAIK,MAAJ,CAAW,GAAX;AACA;AACD,EAfD;AAgBA,CAjBD;;kBAmBeZ,M","file":"addPic.js","sourcesContent":["import express from 'express';\nconst router = express.Router();\n\nimport moment from 'moment';\nimport Picture from '../models/Picture';\nimport jwtPass from '../middlewarePassport/jwtPass';\nimport passport from \"passport\";\nimport fetch from 'node-fetch';\npassport.use(jwtPass);\n\nrouter.post('/', passport.authenticate('jwt', {session: false}), function(req, res){\n\tfetch(req.body.imageUrl).then(function(result){\n\t\tif(result.status === 200){\n\t\t\tconst newPicture = new Picture({\n\t\t\t\ttitle: req.body.imageTitle,\n\t\t\t\turl: req.body.imageUrl,\n\t\t\t\ttime: moment().format('X'),\n\t\t\t\towner: req.user,\n\t\t\t\tlikes: []\n\t\t\t})\n\t\t\tnewPicture.save().then(function(result){\n\t\t\t\tres.send('picture saved')\n\t\t\t})\n\t\t}else{\n\t\t\tres.status(404)\n\t\t}\n\t})\n})\n\nexport default router\n\n"]}